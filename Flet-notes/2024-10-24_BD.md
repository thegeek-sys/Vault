## Quali sono i problemi di uno schema mal progettato?
Ritorniamo al nistro esempuio di base di dati che ciontiuee le informazioni sugli studenti e sugli esami sostenuti, e ripartiamo dalla soluzione “buona” trovata alla fine

![[Progettazione di una base di dati relazionale - Problemi e vincoli#Ipotesi 3]]
### Considerazioni
Ppoicgé il numero di matricola identifica univocamente uno studente, ad ongi numero di matricola corrisponde:
- un solo codice fiscale ($\text{Matr}\to \text{CF}$)
- un solo cognome ($\text{Matr}\to \text{Cogn}$)
- un solo nome ($\text{Matr}\to \text{Nome}$)
- una sola data di nascita ($\text{Matr}\to \text{Data}$)
- un solo comune di nascita ($\text{Matr} \to \text{Com}$)

Quindi un’istanza di Studente per essere legale deve soddisfare la dipendenza funzionale
$$
\text{Matr}\to \text{Matr, CF, Cogn, Nome, Data, Com}
$$

Con considerazioni analoghe abbiamo che un’istanza di Studente per essere legale deve soddisfare la dipendenza funzionale
$$
\text{CF}\to \text{Matr, CF, Cogn, Nome, Data, Com}
$$
Pertanto sia $\text{Matr}$ che $\text{CF}$ sono chiavi di $\text{Studente}$

D’altra parte possiamo osservare che ci possono essere due studenti con lo stesso cognome e nomi differenti quindi possiamo avere due istanze di $\text{Studente}$ che non soddisfano le dipendenza funzionale $\text{Cogn}\to \text{Nome}$

## Terza forma normale
Uno schema di relazione è in 3NF se le uniche dipendenze funzionali non banali (non riflessive) che devono essere soddisfatte da ogni istanza legale sono del tipo
$$
K\to X
$$
dove $K$ contiene una chiave oppure $X$ è contenuto in una chiave

Definizione
Dati uno shema di relazione $R$ e un insieme di dipendenze funzionali $F$ su $R$, $R$ è in **3NF** se
$$
\forall X\to A\in F^+, A\not\in X
$$

A è singleton

>[!example]
>$$
\begin{flalign}R=A,B,C,D&& F=\{AB\to CD, AC\to BD, D\to BC\}\end{flalign}
>$$
>
>Ho come chiavi:
>- $K_{1}=AB$
>- $K_{2}=AC$
>- $K_{3}=AD$ (per il teorema dell’aumento sull’ultima dipendenza funzionale)
>
>
>D nell’ultima dipendenza non è una chiave ma un pezzo di una chiave composta però il determinato è composto da $B$ (un attributo della chiave $AB$) e da $C$ (un attributo della chiave $AC$); dunque lo schema è in 3FN
>Non è in forma normale di Boys Code ma in terza forma normale

Abbiamo notato alcune proprietà delle dipendenze funzionali anche prima di formalizzarle con gli assiomi di Armstrong
